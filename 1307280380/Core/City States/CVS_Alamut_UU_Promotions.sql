-- CVS_Alamut_UU_Promotions
-- Author: SailorCat and thecrazyscotsman
-- DateCreated: 2/5/2018 11:52:47 AM
--------------------------------------------------------------
-- Tier 1:
-- Fleet-Footed: +1 Movement
-- Tenacious: No strength reduction from damage
-- Tier 2:
-- Endurance: Heal every turn
-- Snare: +15 combat str in rough terrain
-- Tier 3:
-- Preparation: May move after attacking
-- Coup De Grace: +20 str vs wounded units
-- Tier 4:
-- Insurrection: Foreign cities within 2 cities suffer -5 loyalty
-- Infiltration: Enter w/o open borders

INSERT INTO THECRAZYSCOTSMAN_DEBUGGING (Document, Marker, Pass) SELECT 'CVS_Alamut_UU_Promotions', 'BEGIN', 1;
-----------------------------------------------		
-- Promotion Types
-----------------------------------------------
INSERT INTO Types
		(Type,										Kind)
VALUES	('PROMOTION_CLASS_CVS_ALAMUT',				'KIND_PROMOTION_CLASS'),
		('PROMOTION_CVS_ALAMUT_FLEET_FOOTED',		'KIND_PROMOTION'),
		('PROMOTION_CVS_ALAMUT_TENACIOUS',			'KIND_PROMOTION'),
		('PROMOTION_CVS_ALAMUT_ENDURANCE',			'KIND_PROMOTION'),
		('PROMOTION_CVS_ALAMUT_SNARE',				'KIND_PROMOTION'),
		('PROMOTION_CVS_ALAMUT_PREPARATION',		'KIND_PROMOTION'),
		('PROMOTION_CVS_ALAMUT_COUP_DE_GRACE',		'KIND_PROMOTION'),
		('PROMOTION_CVS_ALAMUT_INSURRECTION',		'KIND_PROMOTION'),
		('PROMOTION_CVS_ALAMUT_INFILTRATION',		'KIND_PROMOTION'),
		('CVS_ALAMUT_MODIFIER_ALL_DISTRICTS_ATTACH_MODIFIER', 'KIND_MODIFIER'),
		('CVS_ALAMUT_MODIFIER_PLAYER_DISTRICTS_ATTACH_MODIFIER', 'KIND_MODIFIER');

-----------------------------------------------		
-- Promotion Classes
-----------------------------------------------
INSERT INTO UnitPromotionClasses
		(PromotionClassType,				Name)
VALUES	('PROMOTION_CLASS_CVS_ALAMUT',		'LOC_PROMOTION_CLASS_CVS_ALAMUT_NAME');

-----------------------------------------------		
-- UnitPromotions
-----------------------------------------------
INSERT INTO UnitPromotions
		(UnitPromotionType,							Name,												Description,											Level,		Column,		Specialization,		PromotionClass)
VALUES	-- Tier 1
		('PROMOTION_CVS_ALAMUT_FLEET_FOOTED',		'LOC_PROMOTION_CVS_ALAMUT_FLEET_FOOTED_NAME',		'LOC_PROMOTION_CVS_ALAMUT_FLEET_FOOTED_DESCRIPTION',	1,			1,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT'),
		('PROMOTION_CVS_ALAMUT_TENACIOUS',			'LOC_PROMOTION_CVS_ALAMUT_TENACIOUS_NAME',			'LOC_PROMOTION_CVS_ALAMUT_TENACIOUS_DESCRIPTION',		1,			3,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT'),
		-- Tier 2
		('PROMOTION_CVS_ALAMUT_ENDURANCE',			'LOC_PROMOTION_CVS_ALAMUT_ENDURANCE_NAME',			'LOC_PROMOTION_CVS_ALAMUT_ENDURANCE_DESCRIPTION',		2,			1,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT'),
		('PROMOTION_CVS_ALAMUT_SNARE',				'LOC_PROMOTION_CVS_ALAMUT_SNARE_NAME',				'LOC_PROMOTION_CVS_ALAMUT_SNARE_DESCRIPTION',			2,			3,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT'),
		-- Tier 3
		('PROMOTION_CVS_ALAMUT_PREPARATION',		'LOC_PROMOTION_CVS_ALAMUT_PREPARATION_NAME',		'LOC_PROMOTION_CVS_ALAMUT_PREPARATION_DESCRIPTION',		3,			1,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT'),
		('PROMOTION_CVS_ALAMUT_COUP_DE_GRACE',		'LOC_PROMOTION_CVS_ALAMUT_COUP_DE_GRACE_NAME',		'LOC_PROMOTION_CVS_ALAMUT_COUP_DE_GRACE_DESCRIPTION',	3,			3,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT'),
		-- Tier 4
		('PROMOTION_CVS_ALAMUT_INSURRECTION',		'LOC_PROMOTION_CVS_ALAMUT_INSURRECTION_NAME',		'LOC_PROMOTION_CVS_ALAMUT_INSURRECTION_DESCRIPTION',	4,			1,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT'),
		('PROMOTION_CVS_ALAMUT_INFILTRATION',		'LOC_PROMOTION_CVS_ALAMUT_INFILTRATION_NAME',		'LOC_PROMOTION_CVS_ALAMUT_INFILTRATION_DESCRIPTION',	4,			3,			NULL,				'PROMOTION_CLASS_CVS_ALAMUT');

-----------------------------------------------		
-- UnitPromotionPrereqs
-----------------------------------------------
INSERT INTO UnitPromotionPrereqs
		(UnitPromotion,								PrereqUnitPromotion)
VALUES	('PROMOTION_CVS_ALAMUT_ENDURANCE',			'PROMOTION_CVS_ALAMUT_FLEET_FOOTED'),
		('PROMOTION_CVS_ALAMUT_SNARE',				'PROMOTION_CVS_ALAMUT_TENACIOUS'),

		('PROMOTION_CVS_ALAMUT_PREPARATION',		'PROMOTION_CVS_ALAMUT_ENDURANCE'),
		('PROMOTION_CVS_ALAMUT_PREPARATION',		'PROMOTION_CVS_ALAMUT_SNARE'),

		('PROMOTION_CVS_ALAMUT_COUP_DE_GRACE',		'PROMOTION_CVS_ALAMUT_ENDURANCE'),
		('PROMOTION_CVS_ALAMUT_COUP_DE_GRACE',		'PROMOTION_CVS_ALAMUT_SNARE'),

		('PROMOTION_CVS_ALAMUT_INSURRECTION',		'PROMOTION_CVS_ALAMUT_PREPARATION'),
		('PROMOTION_CVS_ALAMUT_INFILTRATION',		'PROMOTION_CVS_ALAMUT_COUP_DE_GRACE');

-----------------------------------------------		
-- UnitPromotionModifiers
-----------------------------------------------
INSERT INTO UnitPromotionModifiers
		(UnitPromotionType,							ModifierId)
VALUES	('PROMOTION_CVS_ALAMUT_FLEET_FOOTED',		'CVS_ALAMUT_FLEET_FOOTED_MOD'),
		('PROMOTION_CVS_ALAMUT_TENACIOUS',			'CVS_ALAMUT_TENACIOUS_MOD'),

		('PROMOTION_CVS_ALAMUT_ENDURANCE',			'CVS_ALAMUT_ENDURANCE_MOD'),
		('PROMOTION_CVS_ALAMUT_SNARE',				'CVS_ALAMUT_SNARE_MOD'),

		('PROMOTION_CVS_ALAMUT_PREPARATION',		'CVS_ALAMUT_PREPARATION_MOD'),
		('PROMOTION_CVS_ALAMUT_COUP_DE_GRACE',		'CVS_ALAMUT_COUP_DE_GRACE_MOD'),

		('PROMOTION_CVS_ALAMUT_INSURRECTION',		'CVS_ALAMUT_INSURRECTION_MOD_1'),
		('PROMOTION_CVS_ALAMUT_INSURRECTION',		'CVS_ALAMUT_INSURRECTION_MOD_2'),
		('PROMOTION_CVS_ALAMUT_INFILTRATION',		'CVS_ALAMUT_INFILTRATION_MOD');

-----------------------------------------------		
--DynamicModifiers
-----------------------------------------------
INSERT INTO DynamicModifiers
		(ModifierType,											CollectionType,				EffectType)
VALUES	('CVS_ALAMUT_MODIFIER_ALL_DISTRICTS_ATTACH_MODIFIER',	'COLLECTION_ALL_DISTRICTS', 'EFFECT_ATTACH_MODIFIER'),
		('CVS_ALAMUT_MODIFIER_PLAYER_DISTRICTS_ATTACH_MODIFIER', 'COLLECTION_PLAYER_DISTRICTS', 'EFFECT_ATTACH_MODIFIER');
-----------------------------------------------		
-- Modifiers
-----------------------------------------------
INSERT INTO Modifiers
		(ModifierId,								ModifierType,												SubjectRequirementSetId)
VALUES	('CVS_ALAMUT_FLEET_FOOTED_MOD',				'MODIFIER_PLAYER_UNIT_ADJUST_MOVEMENT',						NULL),		
		('CVS_ALAMUT_TENACIOUS_MOD',				'MODIFIER_PLAYER_UNIT_ADJUST_NO_REDUCTION_DAMAGE',			NULL),
		('CVS_ALAMUT_ENDURANCE_MOD',				'MODIFIER_PLAYER_UNIT_GRANT_HEAL_AFTER_ACTION',				NULL),
		('CVS_ALAMUT_SNARE_MOD',					'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH',						'CVS_ALAMUT_SNARE_REQUIREMENTSET'),
		('CVS_ALAMUT_PREPARATION_MOD',				'MODIFIER_PLAYER_UNIT_ADJUST_ATTACK_AND_MOVE',				NULL),
		('CVS_ALAMUT_COUP_DE_GRACE_MOD',			'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH',						'CVS_ALAMUT_COUP_DE_GRACE_REQUIREMENTSET'),
		('CVS_ALAMUT_INSURRECTION_MOD_1',			'CVS_ALAMUT_MODIFIER_ALL_DISTRICTS_ATTACH_MODIFIER',		'CVS_ALAMUT_INSURRECTION_REQUIREMENTSET'),
		('CVS_ALAMUT_INSURRECTION_EFFECT_1',		'MODIFIER_SINGLE_CITY_ADJUST_IDENTITY_PER_TURN',			NULL),
		('CVS_ALAMUT_INSURRECTION_MOD_2',			'CVS_ALAMUT_MODIFIER_PLAYER_DISTRICTS_ATTACH_MODIFIER',		'CVS_ALAMUT_INSURRECTION_REQUIREMENTSET'),
		('CVS_ALAMUT_INSURRECTION_EFFECT_2',		'MODIFIER_SINGLE_CITY_ADJUST_IDENTITY_PER_TURN',			NULL),
		('CVS_ALAMUT_INFILTRATION_MOD',				'MODIFIER_PLAYER_UNIT_ADJUST_ENTER_FOREIGN_LANDS',			NULL);

-----------------------------------------------		
-- ModifierArguments
-----------------------------------------------
INSERT INTO ModifierArguments
		(ModifierId,							Name,					Value)
VALUES	('CVS_ALAMUT_FLEET_FOOTED_MOD',			'Amount',				1),
		('CVS_ALAMUT_TENACIOUS_MOD',			'NoReduction',			1),	
		('CVS_ALAMUT_SNARE_MOD',				'Amount',				15),			
		('CVS_ALAMUT_PREPARATION_MOD',			'CanMove',				1),
		('CVS_ALAMUT_COUP_DE_GRACE_MOD',		'Amount',				20),
		('CVS_ALAMUT_INSURRECTION_MOD_1',		'ModifierId',			'CVS_ALAMUT_INSURRECTION_EFFECT_1'),
		('CVS_ALAMUT_INSURRECTION_EFFECT_1',	'Amount',				-5),
		('CVS_ALAMUT_INSURRECTION_MOD_2',		'ModifierId',			'CVS_ALAMUT_INSURRECTION_EFFECT_2'),
		('CVS_ALAMUT_INSURRECTION_EFFECT_2',	'Amount',				5),
		('CVS_ALAMUT_INFILTRATION_MOD',			'Enter',				1);

-----------------------------------------------	
-- Requirements
-----------------------------------------------
INSERT INTO RequirementSets
		(RequirementSetId,							RequirementSetType)
VALUES	('CVS_ALAMUT_SNARE_REQUIREMENTSET',			'REQUIREMENTSET_TEST_ANY'),
		('CVS_ALAMUT_SNARE_CLIFFS_REQUIREMENTSET',	'REQUIREMENTSET_TEST_ALL'),
		('CVS_ALAMUT_COUP_DE_GRACE_REQUIREMENTSET', 'REQUIREMENTSET_TEST_ALL'),
		('CVS_ALAMUT_INSURRECTION_REQUIREMENTSET',	'REQUIREMENTSET_TEST_ALL');

INSERT INTO RequirementSetRequirements
		(RequirementSetId,							RequirementId)
VALUES	('CVS_ALAMUT_SNARE_REQUIREMENTSET',			'CVS_ALAMUT_SNARE_REQUIRES_FOREST'),
		('CVS_ALAMUT_SNARE_REQUIREMENTSET',			'CVS_ALAMUT_SNARE_REQUIRES_JUNGLE'),
		('CVS_ALAMUT_SNARE_REQUIREMENTSET',			'CVS_ALAMUT_SNARE_REQUIRES_MARSH'),
		('CVS_ALAMUT_SNARE_REQUIREMENTSET',			'CVS_ALAMUT_SNARE_REQUIRES_CLIFFS_OF_DOVER'),
		('CVS_ALAMUT_SNARE_REQUIREMENTSET',			'CVS_ALAMUT_SNARE_REQUIRES_CLIFFS_REQUIREMENTSET'),
		('CVS_ALAMUT_SNARE_CLIFFS_REQUIREMENTSET',	'CVS_ALAMUT_SNARE_REQUIRES_HILL'),
		('CVS_ALAMUT_SNARE_CLIFFS_REQUIREMENTSET',	'CVS_ALAMUT_SNARE_REQUIRES_COASTAL'),
		('CVS_ALAMUT_COUP_DE_GRACE_REQUIREMENTSET', 'PLAYER_IS_ATTACKER_REQUIREMENTS'),
		('CVS_ALAMUT_COUP_DE_GRACE_REQUIREMENTSET', 'CVS_ALAMUT_COUP_DE_GRACE_REQUIRES_DAMAGED_UNIT'),
		('CVS_ALAMUT_INSURRECTION_REQUIREMENTSET',	'CVS_ALAMUT_INSURRECTION_REQUIRES_ADJACENT_CITY_CENTER');

INSERT INTO Requirements 
		(RequirementId,										RequirementType)
VALUES	('CVS_ALAMUT_SNARE_REQUIRES_FOREST',				'REQUIREMENT_PLOT_FEATURE_TYPE_MATCHES'),
		('CVS_ALAMUT_SNARE_REQUIRES_JUNGLE',				'REQUIREMENT_PLOT_FEATURE_TYPE_MATCHES'),
		('CVS_ALAMUT_SNARE_REQUIRES_MARSH',					'REQUIREMENT_PLOT_FEATURE_TYPE_MATCHES'),
		('CVS_ALAMUT_SNARE_REQUIRES_CLIFFS_OF_DOVER',		'REQUIREMENT_PLOT_FEATURE_TYPE_MATCHES'),
		('CVS_ALAMUT_SNARE_REQUIRES_CLIFFS_REQUIREMENTSET', 'REQUIREMENT_REQUIREMENTSET_IS_MET'),
		('CVS_ALAMUT_SNARE_REQUIRES_HILL',					'REQUIREMENT_PLOT_IS_HILLS'),
		('CVS_ALAMUT_SNARE_REQUIRES_COASTAL',				'REQUIREMENT_PLOT_IS_COASTAL_LAND'),
		('CVS_ALAMUT_COUP_DE_GRACE_REQUIRES_DAMAGED_UNIT',	'REQUIREMENT_UNIT_DAMAGE_MINIMUM'),
		('CVS_ALAMUT_INSURRECTION_REQUIRES_ADJACENT_CITY_CENTER', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES');

INSERT INTO RequirementArguments 
		(RequirementId,										Name,				Value)
VALUES	('CVS_ALAMUT_SNARE_REQUIRES_FOREST',				'FeatureType',		'FEATURE_FOREST'),
		('CVS_ALAMUT_SNARE_REQUIRES_JUNGLE',				'FeatureType',		'FEATURE_JUNGLE'),
		('CVS_ALAMUT_SNARE_REQUIRES_MARSH',					'FeatureType',		'FEATURE_MARSH'),
		('CVS_ALAMUT_SNARE_REQUIRES_CLIFFS_OF_DOVER',		'FeatureType',		'FEATURE_CLIFFS_DOVER'),
		('CVS_ALAMUT_SNARE_REQUIRES_CLIFFS_REQUIREMENTSET', 'RequirementSetId', 'CVS_ALAMUT_SNARE_CLIFFS_REQUIREMENTSET'),
		('CVS_ALAMUT_COUP_DE_GRACE_REQUIRES_DAMAGED_UNIT',	'MinimumAmount',	24),
		('CVS_ALAMUT_INSURRECTION_REQUIRES_ADJACENT_CITY_CENTER', 'DistrictType',	'DISTRICT_CITY_CENTER'),
		('CVS_ALAMUT_INSURRECTION_REQUIRES_ADJACENT_CITY_CENTER', 'MinRange',	0),
		('CVS_ALAMUT_INSURRECTION_REQUIRES_ADJACENT_CITY_CENTER', 'MaxRange',	2);


-----------------------------------------------
-- ModifierStrings
-----------------------------------------------
INSERT INTO ModifierStrings
		(ModifierId,							Context,				Text)
VALUES	('CVS_ALAMUT_SNARE_MOD',				'Preview',				'+{1_Amount} {LOC_PROMOTION_CVS_ALAMUT_SNARE_NAME} {LOC_PROMOTION_DESCRIPTOR_PREVIEW_TEXT}'),
		('CVS_ALAMUT_COUP_DE_GRACE_MOD',		'Preview',				'+{1_Amount} {LOC_PROMOTION_CVS_ALAMUT_COUP_DE_GRACE_NAME} {LOC_PROMOTION_DESCRIPTOR_PREVIEW_TEXT}');

INSERT INTO THECRAZYSCOTSMAN_DEBUGGING (Document, Marker, Pass) SELECT 'CVS_Alamut_UU_Promotions', 'END', 1;